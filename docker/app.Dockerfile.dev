FROM node:lts-alpine

WORKDIR /usr/src/app

COPY package*.json ./

RUN npm install

# Устанавливаем переменные окружения
ENV APP_PORT=${APP_PORT}
ENV APP_HOST=${APP_HOST}
ENV APP_NODE_ENV=${APP_NODE_ENV}
ENV TYPEORM_USERNAME=${TYPEORM_USERNAME}
ENV TYPEORM_PASSWORD=${TYPEORM_PASSWORD}
ENV TYPEORM_HOST=${TYPEORM_HOST}
ENV TYPEORM_DATABASE=${TYPEORM_DATABASE}
ENV TYPEORM_LOGGING=${TYPEORM_LOGGING}
ENV TYPEORM_CONNECTION=${TYPEORM_CONNECTION}
ENV TYPEORM_SYNCHRONIZE=${TYPEORM_SYNCHRONIZE}
ENV LOGGER_LEVEL=${LOGGER_LEVEL}
ENV LOGGER_CONTEXT_NAME=${LOGGER_CONTEXT_NAME}
ENV JWT_ACCESS_SECRET=${JWT_ACCESS_SECRET}
ENV JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
ENV REFRESH_TOKEN_EXPIRATION=${REFRESH_TOKEN_EXPIRATION}
ENV ACCESS_TOKEN_EXPIRATION=${ACCESS_TOKEN_EXPIRATION}

COPY . .